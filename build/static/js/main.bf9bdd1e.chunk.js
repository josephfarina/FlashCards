(this.webpackJsonpflashcards=this.webpackJsonpflashcards||[]).push([[0],{32:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(11),c=a(9);r.b.add(c.a,c.c,c.g,c.b,c.f,c.d,c.e,c.h);var s=a(1),l=a.n(s),i=a(23),o=a.n(i),u=a(2),d=a.n(u),h=a(5),b=a(3),f=(a(32),a(6)),j=a.n(f),x="/api/flashcards",O=null,p={getAllFlashcards:function(){return j.a.get(x).then((function(e){return e.data}))},createFlashcard:function(){var e=Object(h.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:O}},e.next=3,j.a.post(x,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateFlashcard:function(e,t){var a={headers:{Authorization:O}};return j.a.put("".concat(x,"/").concat(e),t,a).then((function(e){return e.data}))},deleteFlashcard:function(e){var t={headers:{Authorization:O}};return j.a.delete("".concat(x,"/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){O="bearer ".concat(e)}},v=function(e){var t=e.className,a=e.text,r=e.onClick,c=e.disabled;return Object(n.jsx)("button",{className:t,onClick:r,disabled:c,children:a})},m=a(10),g=function(e){var t=e.mousePosition,a=e.transition,r={transform:"rotateY(".concat(t?t.xAxis:0,"deg) rotateX(").concat(t?t.yAxis:0,"deg)"),transition:a,padding:"3%",overflow:"hidden"};return Object(n.jsx)("div",{className:"flashcard",style:r,children:Object(n.jsx)("div",{className:"scanner",style:{background:"white",height:"90%",color:"rgba(1, 1, 1, 0.2)",borderRadius:"15px",maxWidth:"1px",marginLeft:" 0",boxShadow:"rgba(1, 1, 1, 0.3) 0px 0px 70px 17px, rgba(1,1,1,.1) 0px 0px 50px 10px",transform:"translateZ(45px)",position:"absolute"}})})},S=function(e){var t=e.flashcards,a=e.setFlashcards,r=e.currentFlashcardIndex,c=e.canEdit,l=Object(s.useState)({xAxis:0,yAxis:0}),i=Object(b.a)(l,2),o=i[0],u=i[1],d=Object(s.useState)("none"),h=Object(b.a)(d,2),f=h[0],j=h[1],x=Object(s.useState)(null),O=Object(b.a)(x,2),v=O[0],S=O[1],N=Object(s.useState)(""),F=Object(b.a)(N,2),w=F[0],I=F[1],C=Object(s.useState)(!0),k=Object(b.a)(C,2),y=k[0],_=k[1];Object(s.useEffect)((function(){var e=t[r];S(e),_(!0)}),[r]),Object(s.useEffect)((function(){S(t[r]||null)}),[t]);var A=Object(s.useRef)(!0);Object(s.useEffect)((function(){A.current?A.current=!1:c||E()}),[c]);var T={transform:"rotateY(".concat(o.xAxis,"deg) rotateX(").concat(o.yAxis,"deg)"),transition:f},E=function(){console.log("SAVING CHANGES TO FLASHCARD");var e=t[r],n=y?Object(m.a)(Object(m.a)({},e),{},{front:w||e.front}):Object(m.a)(Object(m.a)({},e),{},{back:w||e.back});p.updateFlashcard(e.id,n).then((function(n){a(t.map((function(t){return t.id!==e.id?t:n})))})).catch((function(t){console.log(t),S(e)})).then((function(){I("")}))};return Object(n.jsx)("div",{className:"flashcard-container",onMouseMove:function(e){var t=-(window.innerWidth/2-e.pageX)/25,a=(window.innerHeight/2-e.pageY)/25;j("none"),u({xAxis:t,yAxis:a})},onMouseLeave:function(){j("transform .5s ease-out"),u({xAxis:0,yAxis:0})},onMouseEnter:function(){j("transform .5s ease-out"),u({xAxis:0,yAxis:0})},children:v?Object(n.jsx)("div",{className:"flashcard",onClick:function(){c||_(!y)},style:T,children:Object(n.jsxs)("div",{className:"flex-centering noselect",children:[Object(n.jsx)("span",{className:"card-number noselect",children:Number.parseInt(r)+1}),Object(n.jsx)("textarea",{type:"text",className:c?"flashcard-text":"flashcard-text noselect",disabled:!c,value:y?v.front:v.back,onChange:function(e){c&&(console.log("handling text edit!"),I(e.target.value),S(y?Object(m.a)(Object(m.a)({},v),{},{front:e.target.value}):Object(m.a)(Object(m.a)({},v),{},{back:e.target.value})))}})]})}):Object(n.jsx)(g,{mousePosition:o,transition:f})})},N=a(8),F=function(e){var t=e.flashcards,a=e.currentFlashcardIndex,r=e.setCurrentFlashcardIndex;return console.log(a),Object(n.jsx)("div",{className:"tools__card-selection",children:Object(n.jsx)("select",{onChange:function(e){r(Number(e.target.value))},value:a,children:t?t.map((function(e,t){return Object(n.jsx)("option",{value:t,children:t+1+": "+e.front},6*Math.random(35))})):[]})})},w=function(e){var t=e.amountOfFlashcards,a=e.handleNewFlashCard,r=e.handleEditFlashCard,c=e.handleDeleteFlashCard,s=e.flashcards,l=e.currentFlashcardIndex,i=e.setCurrentFlashcardIndex;return Object(n.jsxs)("div",{className:"flashcard-tools",children:[Object(n.jsxs)("div",{className:"button-container",children:[Object(n.jsx)(v,{onClick:a,text:Object(n.jsx)(N.a,{icon:["fa","plus"],size:"2x"}),className:"new-flashcard-button"}),Object(n.jsx)(v,{onClick:r,text:Object(n.jsx)(N.a,{icon:["fa","pen"],size:"2x"}),className:"edit-flashcard-button"}),Object(n.jsx)(v,{onClick:c,text:Object(n.jsx)(N.a,{icon:["fa","trash"],size:"2x"}),className:"delete-flashcard-button",disabled:t<=1})]}),Object(n.jsx)(F,{flashcards:s,currentFlashcardIndex:l,setCurrentFlashcardIndex:i})]})},I=function(e){var t=e.flashcards,a=e.setFlashcards,r=e.flashcardSets,c=e.currentSetIndex,l=e.currentFlashcardIndex,i=e.setCurrentFlashcardIndex,o=Object(s.useState)(!1),u=Object(b.a)(o,2),f=u[0],j=u[1],x=function(){var e=Object(h.a)(d.a.mark((function e(n){var s,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),j(!1),s=r[c].id,l={front:"front",back:"back",setId:s},p.createFlashcard(l).then((function(e){a(t.concat(e)),i(t.length)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"flashcards-display",children:[Object(n.jsx)(w,{amountOfFlashcards:t?t.length:0,handleNewFlashCard:x,handleEditFlashCard:function(){j(!f),console.log(f)},handleDeleteFlashCard:function(){j(!1);var e=t[l];p.deleteFlashcard(e.id).then((function(){console.log("deleted"),i(0===l?0:l-1);var e=t.filter((function(e,t){return t!==l}));a(e)})).catch((function(e){console.error(e)})),console.log("After Delete",l,t)},flashcards:t,currentFlashcardIndex:l,setCurrentFlashcardIndex:i}),Object(n.jsxs)("div",{className:"flashcard-selection",children:[Object(n.jsx)(v,{onClick:function(){i(l-1<0?t.length-1:l-1)},text:"\u261a",className:"change-card-button previous-flashcard-button"}),Object(n.jsx)(S,{canEdit:f,currentFlashcardIndex:l,flashcards:t||[],setFlashcards:a}),Object(n.jsx)(v,{onClick:function(){l+1>=t.length?i(0):i(l+1)},text:"\u261b",className:"change-card-button next-flashcard-button"})]})]})},C={login:function(){var e=Object(h.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("http://localhost:3001/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(e){var t=e.setUser,a=Object(s.useState)(""),r=Object(b.a)(a,2),c=r[0],l=r[1],i=Object(s.useState)(""),o=Object(b.a)(i,2),u=o[0],f=o[1],j=function(){var e=Object(h.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,C.login({username:c,password:u});case 4:n=e.sent,console.log("user",n),window.localStorage.setItem("loggedFlashcardAppUser",JSON.stringify(n)),p.setToken(n.token),console.log(n.username,"logged in"),l(""),f(""),t(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("wrong credentials");case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"login noselect",children:[Object(n.jsx)("h3",{children:"Login"}),Object(n.jsxs)("form",{className:"login-form",onSubmit:j,children:[Object(n.jsx)("input",{type:"text",id:"username",value:c,name:"Username",onChange:function(e){var t=e.target;return l(t.value)},placeholder:"username"}),Object(n.jsx)("input",{id:"password",type:"password",value:u,name:"Password",onChange:function(e){var t=e.target;return f(t.value)},placeholder:"password"}),Object(n.jsx)("button",{type:"submit",className:"login-button",children:"login"})]})]})},y="/api/sets",_=null,A={setToken:function(e){_="bearer ".concat(e)},getAllSets:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(y);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSetById:function(){var e=Object(h.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(y,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllFlashcardsInSet:function(){var e=Object(h.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(y,"/").concat(t,"/flashcards"));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createSet:function(){var e=Object(h.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},e.next=3,j.a.post(y,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateSetTitle:function(e,t){var a={headers:{Authorization:_}};return j.a.patch("".concat(y,"/").concat(e),{title:t},a).then((function(e){return e.data}))},deleteSet:function(){var e=Object(h.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},e.next=3,j.a.delete("".concat(y,"/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T=function(e){var t=e.flashcards,a=e.set,r=e.index,c=e.setCreator,l=e.currentSetIndex,i=e.setCurrentSetIndex,o=e.flashcardSets,u=e.setFlashcardSets,f=e.currentFlashcardIndex,j=e.setCurrentFlashcardIndex,x=Object(s.useState)(0),O=Object(b.a)(x,2),p=O[0],m=O[1],g=Object(s.useState)(a.title),S=Object(b.a)(g,2),F=S[0],w=S[1],I=Object(s.useState)(!1),C=Object(b.a)(I,2),k=C[0],y=C[1],_=Object(s.useState)(r),T=Object(b.a)(_,1)[0],E=Object(s.useState)(null),z=Object(b.a)(E,2),L=z[0],D=z[1];Object(s.useEffect)(Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getAllFlashcardsInSet(a.id);case 2:t=e.sent,D(t),m(t.length);case 5:case"end":return e.stop()}}),e)}))),[t]);return Object(n.jsxs)("div",{className:"sidebar__setlist__set",children:[Object(n.jsxs)("div",{className:"set__header",onClick:function(){if(!k){console.log(l);var e=o.findIndex((function(e){return a.id===e.id}));j(0),i(e)}},children:[Object(n.jsx)("input",{className:"set__header__title",type:"text",defaultValue:F,disabled:!k,onChange:function(e){k&&w(e.target.value)}}),Object(n.jsx)(v,{onClick:function(){y(!k),k&&(a.title=F,console.log("saving edit to server"),A.updateSetTitle(a.id,F).then((function(e){console.log(e)})))},className:k?"edit-mode title-edit-button":"title-edit-button",text:k?Object(n.jsx)(N.a,{icon:["fa","save"],size:"sm"}):Object(n.jsx)(N.a,{icon:["fa","edit"],size:"sm"})}),Object(n.jsx)(v,{onClick:function(){A.deleteSet(a.id).then((function(){var e=o.filter((function(e){return e.id!==a.id}));u(e),(0===l||l>=e.length-1)&&i(0),l<=e.length&&i(l-1),console.log("deleted",l)}))},className:"title-edit-button",text:Object(n.jsx)(N.a,{icon:["fa","trash"],size:"sm"})})]}),Object(n.jsxs)("div",{className:"set__info",children:[Object(n.jsx)("div",{className:"set__length",children:Object(n.jsx)("span",{children:"length: "+p})}),Object(n.jsx)("div",{className:"set__creator",children:Object(n.jsx)("span",{children:c})}),Object(n.jsx)("hr",{className:"divide-line"})]}),Object(n.jsx)("div",{className:"set__preview",children:Object(n.jsx)("ul",{children:L?L.map((function(e,a){return Object(n.jsx)("li",{className:t[f]&&t[f].id===e.id?"set__preview__item current-flashcard":"set__preview__item",onClick:function(e){return t=a,void L.map((function(e,a){a===t&&l===T&&j(t)}));var t},children:e.front},e.id)})):"loading..."})})]})},E=function(e){var t=e.flashcards,a=e.flashcardSets,r=e.setFlashcardSets,c=e.currentSetIndex,l=e.setCurrentSetIndex,i=e.currentFlashcardIndex,o=e.setCurrentFlashcardIndex,u=e.sidebarSearchText,d=Object(s.useState)(null),h=Object(b.a)(d,2),f=h[0],j=h[1];return Object(s.useEffect)((function(){j(a)}),[a]),Object(s.useEffect)((function(){if(""===u)console.log("search empty",a),j(a);else{var e=a.filter((function(e){return e.title.includes(u,0)})).sort((function(e,t){return console.log(e,t),e.title.indexOf(u)-t.title.indexOf(u)}));j(e)}}),[u]),Object(n.jsx)("div",{className:"sidebar__setlist",children:f?Object(n.jsx)("ul",{children:f.map((function(e,s){return Object(n.jsx)("li",{className:f[s]===a[c]?"current-set":"",children:Object(n.jsx)(T,{set:e,index:s,flashcards:t,setCreator:e.username,currentSetIndex:c,setCurrentSetIndex:l,flashcardSets:a,setFlashcardSets:r,currentFlashcardIndex:i,setCurrentFlashcardIndex:o,sidebarSearchText:u})},e.id)}))}):Object(n.jsx)("div",{children:"Loading Set List..."})})},z=function(e){var t=e.inputText,a=e.setInputText,r=e.className;return Object(n.jsx)("div",{className:r,children:Object(n.jsx)("input",{onChange:function(e){a(e.target.value)},value:t,type:"text",placeholder:"Search Set Titles..."})})},L=function(e){var t=e.sidebarSearchText,a=e.setSidebarSearchText,r=e.handleNewSet;return console.log(t),Object(n.jsxs)("div",{className:"sidebar__header",children:[Object(n.jsx)(v,{text:Object(n.jsx)(N.a,{icon:["fa","plus"],size:"2x"}),className:"new-set-button",onClick:r}),Object(n.jsx)(z,{className:"search-bar",inputText:t,setInputText:a})]})},D=function(e){var t=e.flashcards,a=e.setFlashcards,r=e.flashcardSets,c=e.setFlashcardSets,l=e.currentSetIndex,i=e.setCurrentSetIndex,o=e.currentFlashcardIndex,u=e.setCurrentFlashcardIndex,f=Object(s.useState)(""),j=Object(b.a)(f,2),x=j[0],O=j[1];Object(s.useEffect)((function(){O("")}),[l]);return Object(n.jsxs)("div",{className:"sidebar",children:[Object(n.jsx)(L,{sidebarSearchText:x,setSidebarSearchText:O,handleNewSet:function(){A.createSet({title:"new set"}).then(function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(r.concat(t));case 2:console.log("added to sets",r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),Object(n.jsx)(E,{flashcards:t||[],setFlashcards:a,flashcardSets:r,setFlashcardSets:c,currentSetIndex:l,setCurrentSetIndex:i,currentFlashcardIndex:o,setCurrentFlashcardIndex:u,sidebarSearchText:x}),Object(n.jsx)("div",{className:"sidebar__bottom"})]})},M=l.a.forwardRef((function(e,t){var a=Object(s.useState)(!1),r=Object(b.a)(a,2),c=r[0],l=r[1],i={display:c?"none":""},o={display:c?"":"none"};M.displayName="Togglable";var u=function(){l(!c)};return Object(s.useImperativeHandle)(t,(function(){return{toggleVisibility:u}})),Object(n.jsxs)("div",{className:"".concat(e.parentDivClassName," ").concat(c?"visible":"invisible"),children:[Object(n.jsx)("div",{style:i,children:Object(n.jsx)("button",{onClick:u,className:"".concat(e.buttonLabel,"-outside-button"),children:e.buttonLabel})}),Object(n.jsxs)("div",{style:o,className:"togglableContent",children:[e.children,Object(n.jsx)("button",{onClick:u,className:"".concat(e.buttonLabel,"-cancel-button"),children:"cancel"})]})]})})),U=M;var R=function(){var e=Object(s.useState)(null),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(s.useState)(0),l=Object(b.a)(c,2),i=l[0],o=l[1],u=Object(s.useState)(0),f=Object(b.a)(u,2),j=f[0],x=f[1],O=Object(s.useState)(null),v=Object(b.a)(O,2),m=v[0],g=v[1],S=Object(s.useState)(null),N=Object(b.a)(S,2),F=N[0],w=N[1];Object(s.useEffect)(Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getAllSets();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)}))),[]),Object(s.useEffect)(Object(h.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(null),e.next=3,A.getAllSets();case 3:return t=e.sent,r(t),a=t[i].id,e.next=8,A.getAllFlashcardsInSet(a);case 8:n=e.sent,g(n);case 10:case"end":return e.stop()}}),e)}))),[i]),Object(s.useEffect)((function(){var e=window.localStorage.getItem("loggedFlashcardAppUser");if(e){console.log("logging in user");var t=JSON.parse(e);w(t),p.setToken(t.token),A.setToken(t.token)}}),[]);var C=Object(s.useRef)(),y=function(e){e.preventDefault(),p.setToken(null),window.localStorage.removeItem("loggedFlashcardAppUser"),w(null)};return Object(n.jsxs)("div",{children:[Object(n.jsxs)("header",{children:[Object(n.jsx)("h1",{className:"main-title noselect",children:"Flashcards"}),F?Object(n.jsxs)("div",{className:"logout-div",children:[Object(n.jsx)("div",{className:"user-greeting",children:"hello, ".concat(F.username)}),Object(n.jsx)("button",{onClick:y,className:"logout-button",children:"Logout"})]}):Object(n.jsx)(U,{buttonLabel:"login",ref:C,parentDivClassName:"login-div",children:Object(n.jsx)(k,{setUser:w})})]}),Object(n.jsxs)("div",{className:"main-section",children:[Object(n.jsx)(D,{flashcards:m,setFlashcards:g,flashcardSets:a,setFlashcardSets:r,currentSetIndex:i,setCurrentSetIndex:o,currentFlashcardIndex:j,setCurrentFlashcardIndex:x}),Object(n.jsx)(I,{flashcards:m,setFlashcards:g,flashcardSets:a,currentSetIndex:i,currentFlashcardIndex:j,setCurrentFlashcardIndex:x})]})]})};o.a.render(Object(n.jsx)(l.a.StrictMode,{children:Object(n.jsx)(R,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.bf9bdd1e.chunk.js.map